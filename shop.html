<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tracking Snippet -->
  <script defer data-domain="pfalzventure.de" src="https://plausible.io/js/script.js"></script>

  <title>Shop ‚Äì Pfalzventure</title>
  <link rel="stylesheet" href="style.css">

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=AQbF-v1VWk6QCLKdNODfXJb-fUAcoTsnE1ux9JvHUWNYuJQE1xskgSu7ff_qniWdL168KWEw_oX7iCHB&currency=EUR"></script>
</head>
<body>
  <!-- ============================
       Header mit Navigation
       ============================ -->
  <header>
    <div class="container">
      <a href="index.html" class="logo">
        <img src="assets/Logo2.png" alt="Pfalzventure Logo">
      </a>

      <div class="burger" onclick="toggleMenu()">‚ò∞</div>

      <nav>
        <ul class="nav-links" id="nav-links">
          <li><a href="index.html">Start</a></li>
          <li><a href="kurse.html">Kurse</a></li>
          <li><a href="shop.html" class="active">Shop</a></li>
          <li><a href="kontakt.html">Kontakt</a></li>
        </ul>
      </nav>

    <button id="cart-toggle" onclick="toggleCart()" class="btn cart-btn">
  üõí Warenkorb (<span id="cart-count">0</span>)
</button>

    </div>
  </header>

  <script>
    function toggleMenu() {
      document.getElementById("nav-links").classList.toggle("nav-active");
    }

    document.addEventListener("click", function(event) {
      const menu = document.getElementById("nav-links");
      const burger = document.querySelector(".burger");
      if (menu && burger && !menu.contains(event.target) && !burger.contains(event.target)) {
        menu.classList.remove("nav-active");
      }
    });
  </script>

  <!-- ============================
       Shop-Bereich
  ============================ -->
  <main class="shop-section">
    <h1>Shop</h1>

    <!-- Produkt 1 -->
    <div class="product" id="survivalkit">
      <h2>Survival Kit</h2>
      <p>
        Kein Billigschrott, sondern erprobtes Handwerkszeug zum √úberleben. In diesem 13 X 21 cm kleinen Beh√§lter findest du alles was du brauchst um in der Natur √ºberleben zu k√∂nnen:
        <br><br>
        <ul class="saubere-liste">
        <li> Feuerstahl</li>
        <li> Messer</li>
        <li> 2L Trinkgef√§√ü</li>
        <li> Kompass</li>
        <li> Medipack</li>
        <li> Schnur</li>
        <li> Panzertape</li>
        <li> Rettungsdecken</li>
        <li> S√§ge</li>
        <li> und vieles mehr...</li>
      </p>
           <figure class="product-kitpic">
  <img src="assets/kit1_bearbeitet.jpg" alt="Survival Kit Pfalzventure">
</figure>
           <br>
          <p>
        In den Kursen kannst du entweder mit deiner eigenen Ausr√ºstung oder mit diesem Kit als Leihgabe umgehen lernen. Kaufen kannst du es direkt hier, oder bei den Kursen vor Ort. Zur Teilnahme an einem der Kurse ist der Kauf aber nicht erforderlich!
        <br>
        <br><b>Jetzt Versandkostenfrei bestellen!</b>
        <br>Spar Tipp: Kursteilnehmer bekommen einen 10‚Ç¨ Rabatt auf ein neues Survival Kit.
      </p>
      <button class="btn add-btn" onclick="addToCart('Survival Kit', 49.90)">In den Warenkorb (49,90 ‚Ç¨)</button>
    </div>

    <!-- Produkt 2 -->
    <div class="product" id="crashkurs">
      <h2>1 Tages Survival Crashkurs</h2>
      <p>Wem es rein ums Wissen geht: Erlerne an nur einem Tag die wichtigsten Skills um in der Natur √ºberleben zu k√∂nnen. </p>
      <label for="kursTermine1">M√∂gliche Kurstermine:</label><br>
       <select id="kursTermine1" class="terminfenster" size="5"></select>
      <br><br>
      <a href="kurse.html#crashkurs" class="btn info-btn">‚ÑπÔ∏è Mehr Infos</a><br><br>
      <button class="btn add-btn" onclick="addCourseVoucher('kursTermine1','1 Tages Survival Crashkurs',59.90)">In den Warenkorb (59,90 ‚Ç¨)</button>
    </div>

    <!-- Produkt 3 -->
    <div class="product" id="intensivkurs">
      <h2>2 Tages Survival Intensivkurs</h2>
      <p>Ein spannendes Abenteuer voll mit Survival Wissen: Erlerne an zwei Tagen die wichtigsten Skills um in der Natur √ºberleben zu k√∂nnen und festige diese in einem spannenden und realit√§tsnahem Szenario.</p> 
       <label for="kursTermine2">M√∂gliche Kurstermine:</label><br>
     <select id="kursTermine2" class="terminfenster" size="5"></select>
      <br><br>
      <a href="kurse.html#intensivkurs" class="btn info-btn">‚ÑπÔ∏è Mehr Infos</a><br><br>
      <button class="btn add-btn" onclick="addCourseVoucher('kursTermine2','2 Tages Survival Intensivkurs',149.90)">In den Warenkorb (149,90 ‚Ç¨)</button>
    </div>
    

    <!-- Produkt 4 -->
    <div class="product" id="bushcraftkurs">
      <h2>3 Tages Bushcraft Kurs</h2>
      <p>Unser h√§rtester Kurs: Du suchst eine echte Herausforderung und liebst es an deine Grenzen zu gehen? Lerne in 3 Tagen selbst ohne Hilfsmittel in der Natur zu √ºberleben.</p> 
      <label for="kursTermine3">M√∂gliche Kurstermine:</label><br>
      <select id="kursTermine3" class="terminfenster" size="2"></select>
      <br><br>
      <a href="kurse.html#bushcraftkurs" class="btn info-btn">‚ÑπÔ∏è Mehr Infos</a><br><br>
      <button class="btn add-btn" onclick="addCourseVoucher('kursTermine3','3 Tages Bushcraft Kurs',299.90)">In den Warenkorb (299,90 ‚Ç¨)</button>
    </div>
 
      <!-- Produkt 5--> 
    <div class="product" id="gutschein">
      <h2>Wert-Gutschein</h2>
      <p>Auf der Suche nach einem au√üergew√∂hnlichem Geschenk? W√§hle deinen Wunschbetrag und erhalte einen sch√∂n gestalteten Gutschein zum Selbstausdrucken per Mail.</p>
 <figure class="product-voucherpic">
  <img src="assets/Gutschein.png" alt="Gutschein Pfalzventure">
</figure>
      <br>
      <label for="voucherAmount">Betrag in ‚Ç¨:</label><br>
      <input type="number" id="voucherAmount" value="50" min="10" step="5"><br><br>

<label for="vouchertext">Widmung / Freitext:</label><br>
<textarea id="vouchertext" 
          rows="3" 
          maxlength="80"
  oninput="updateVoucherCounter()"
          style="width:100%; max-width:320px;"></textarea>

<div id="voucherCounter"
     style="font-size:0.85rem; color:#555; text-align:right;">
  0 / 80 Zeichen
</div>
<br>
     
      <button class="btn add-btn" onclick="addVoucher()">In den Warenkorb</button>
    </div>
  </main>

   <!-- cookie Banner 
  
  <div id="paypal-cookie-banner" class="paypal-banner" style="display:none;">
    <p>
      F√ºr die Nutzung der PayPal-Zahlungsfunktion werden technisch notwendige Cookies von PayPal gesetzt.
      <a href="https://www.paypal.com/de/webapps/mpp/ua/privacy-full" target="_blank" rel="noopener noreferrer">Mehr erfahren</a>
    </p>
    <button id="paypal-cookie-ok">Alles klar!</button>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const banner = document.getElementById("paypal-cookie-banner");
  const okBtn = document.getElementById("paypal-cookie-ok");

  if (!banner || !okBtn) return;

  // Banner anzeigen, wenn noch keine Zustimmung gespeichert ist
  if (!localStorage.getItem("paypal_cookie_ok")) {
    banner.style.display = "flex"; // WICHTIG: flex, nicht block
  }

  okBtn.addEventListener("click", () => {
    localStorage.setItem("paypal_cookie_ok", "1");
    banner.style.display = "none";
  });
});
</script>
-->


 
 <!-- üîÑ Kurstermine automatisch laden -->
<script>
document.addEventListener("DOMContentLoaded", () => {

  /**
   * L√§dt Termine aus einer JSON-Datei und bef√ºllt ein Dropdown.
   * Wenn keine Termine vorhanden sind, wird das Dropdown deaktiviert.
   * @param {string} selectId - ID des <select>-Elements
   * @param {string} jsonPath - Pfad zur JSON-Datei (z.B. "assets/kurstermine_1_tag.json")
   */
  async function loadCourseDates(selectId, jsonPath) {
    const select = document.getElementById(selectId);
    if (!select) return console.warn(`‚ö†Ô∏è Dropdown #${selectId} nicht gefunden.`);

    try {
      const res = await fetch(jsonPath);
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();

      const termine = data.termine || data;
      if (!Array.isArray(termine) || termine.length === 0) {
        throw new Error("Keine Termine gefunden");
      }

      // Dropdown leeren und bef√ºllen
      select.innerHTML = "";
      termine.forEach(t => {
        const opt = document.createElement("option");
        opt.value = t.id || t.text || t;
        opt.textContent = t.text || t.name || t;
        select.appendChild(opt);
      });

      select.disabled = false;
      console.log(`‚úÖ ${jsonPath} geladen (${termine.length} Termine)`);

    } catch (err) {
      console.warn(`‚ö†Ô∏è ${jsonPath} konnte nicht geladen werden:`, err);
      select.innerHTML = "";
      const opt = document.createElement("option");
      opt.textContent = "Derzeit keine Termine verf√ºgbar";
      opt.disabled = true;
      select.appendChild(opt);
      select.disabled = true;
    }
  }

  // Alle Kurs-Dateien laden
  loadCourseDates("kursTermine1", "assets/kurstermine_1_tag.json");
  loadCourseDates("kursTermine2", "assets/kurstermine_2_tage.json");
  loadCourseDates("kursTermine3", "assets/kurstermine_3_tage.json");

});
</script>

 <!-- üõí Zentralen Warenkorb laden -->
<script>
document.addEventListener("DOMContentLoaded", async () => {
  try {
    const res = await fetch("partials/cart.html");
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    const html = await res.text();

    const temp = document.createElement("div");
    temp.innerHTML = html.trim();

    Array.from(temp.children).forEach(el => {
      if (el.tagName.toLowerCase() === "script") {
        const script = document.createElement("script");
        if (el.src) script.src = el.src;
        else script.textContent = el.textContent;
        document.body.appendChild(script);
      } else {
        document.body.appendChild(el);
      }
    });

    console.log("üõí Warenkorb erfolgreich geladen und initialisiert");

    setTimeout(() => {
      if (typeof loadCart === "function") {
        loadCart();
        console.log("‚úÖ Warenkorb-Logik aktiv");
      } else {
        console.error("‚ö†Ô∏è Warenkorb-Skripte wurden nicht korrekt ausgef√ºhrt");
      }
    }, 300);
  } catch (err) {
    console.error("‚ùå Fehler beim Laden des Warenkorbs:", err);
  }
});
</script>

   <!-- ============================
       Footer
       ============================ -->
  <footer>
    <p>¬© 2025 Pfalzventure ‚Äì Robert Prokasky</p>
    <p><a href="impressum.html">Impressum</a> | <a href="datenschutz.html">Datenschutz</a> | <a href="AGB.html">AGB</a></p>
  </footer>
  
  
</body>
</html>
